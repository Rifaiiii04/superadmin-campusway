MANUAL FIX COMMANDS FOR 403 FORBIDDEN
=====================================

1. SSH to VPS:
   ssh marketing@103.23.198.101

2. Navigate to superadmin:
   cd /var/www/superadmin/superadmin-campusway

3. Stop Apache:
   sudo systemctl stop apache2

4. Create simple Apache config:
   sudo nano /etc/apache2/sites-available/000-default.conf

5. Replace content with:
<VirtualHost *:80>
    ServerName 103.23.198.101

    # SUPERADMIN - SIMPLE CONFIG
    DocumentRoot /var/www/superadmin/superadmin-campusway/public
    <Directory /var/www/superadmin/superadmin-campusway/public>
        Options -Indexes +FollowSymLinks
        AllowOverride All
        Require all granted
        RewriteEngine On
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteRule ^ index.php [L]
    </Directory>

    # NEXT.JS - SECONDARY
    Alias /arahpotensi /var/www/arahpotensi/out
    <Directory /var/www/arahpotensi/out>
        Options -Indexes +FollowSymLinks
        AllowOverride All
        Require all granted
        RewriteEngine On
        RewriteCond %{REQUEST_URI} !^/super-admin
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule . /index.html [L]
    </Directory>

    # PHP Handler
    <FilesMatch \.php$>
        SetHandler "proxy:unix:/var/run/php/php8.3-fpm.sock|fcgi://localhost"
    </FilesMatch>

    ErrorLog ${APACHE_LOG_DIR}/103.23.198.101_error.log
    CustomLog ${APACHE_LOG_DIR}/103.23.198.101_access.log combined
</VirtualHost>

6. Enable modules:
   sudo a2enmod rewrite
   sudo a2enmod headers
   sudo a2enmod alias

7. Test config:
   sudo apache2ctl configtest

8. Start Apache:
   sudo systemctl start apache2

9. Fix app.blade.php:
   sudo nano resources/views/app.blade.php

10. Replace content with:
<!DOCTYPE html>
<html lang="{{ str_replace('_', '-', app()->getLocale()) }}">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title inertia>{{ config('app.name', 'Laravel') }}</title>
        <meta name="csrf-token" content="{{ csrf_token() }}">
        <link rel="preconnect" href="https://fonts.bunny.net">
        <link href="https://fonts.bunny.net/css?family=figtree:400,500,600&display=swap" rel="stylesheet" />
        @routes
        @inertiaHead
        
        <!-- Use relative paths -->
        <script type="module" src="./build/assets/app-DWYINBfv.js"></script>
        <link rel="stylesheet" href="./build/assets/app-d2W3ZRG7.css">
    </head>
    <body class="font-sans antialiased">
        @inertia
    </body>
</html>

11. Clear caches:
    php artisan config:clear
    php artisan route:clear
    php artisan view:clear
    php artisan cache:clear

12. Set permissions:
    sudo chown -R www-data:www-data storage bootstrap/cache public
    sudo chmod -R 775 storage bootstrap/cache
    sudo chmod -R 755 public

13. Test:
    curl -I http://103.23.198.101/super-admin/login
    curl -I http://103.23.198.101/super-admin/build/assets/app-DWYINBfv.js